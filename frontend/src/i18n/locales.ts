export type Lang = 'zh' | 'en' | 'ja'

export const locales: Record<Lang, Record<string, string>> = {
  zh: {
    // App / SEO
    pageTitle: 'FrameRonin - 视频转序列帧',
    pageDescription: '将视频提取为序列帧、抠图去背、生成 Sprite Sheet，支持透明 PNG 与 ZIP 打包下载。',
    // App
    subtitle: '视频转序列帧 · 抠图 · Sprite Sheet',
    moduleVideo: '视频转序列帧',
    moduleVideoDesc: '提取视频帧、抠图、生成 Sprite Sheet',
    moduleImage: '像素图片处理',
    moduleImageDesc: '对单张图片进行缩放与内描边',
    moduleGem: 'nanobanana预设像素角色生成器v1',
    moduleGemDesc: '使用 Gemini 生成预设风格像素角色',
    moduleGif: 'GIF ↔ 序列帧',
    moduleGifDesc: 'GIF 拆帧 / 多图合成 GIF',
    moduleSpriteSheet: 'Sprite Sheet',
    moduleSpriteSheetDesc: '拆分序列帧图 / 合成 GIF',
    modulePixelate: '图片像素化',
    modulePixelateDesc: '将图片转换为像素块风格',
    stepUpload: '上传视频',
    stepParams: '参数设置',
    contactLabel: '发现问题？',
    poweredBy: 'Powered by',
    // UploadStep
    uploadHint: '点击或拖拽视频到此处',
    uploadFormats: '支持 MP4 / MOV / WebM / AVI / MKV，最大 200MB',
    formatError: '仅支持 {formats} 格式',
    sizeError: '文件不得超过 200MB',
    selected: '已选择',
    nextStep: '下一步：参数设置',
    // ImageResizeStroke
    imageUploadHint: '点击或拖拽图片到此处',
    imageFormats: '支持 PNG / JPG / WebP，最大 20MB',
    imageFormatError: '仅支持 PNG / JPG / WebP',
    imageSizeError: '图片不得超过 20MB',
    imgTargetW: '目标宽度',
    imgTargetH: '目标高度',
    imgKeepAspect: '保持比例',
    imgStretch: '拉伸填充',
    imgStrokeSection: '描边（可选）',
    imgStrokeHint: '在透明边缘向内绘制描边，0 为不描边',
    imgApplyPreview: '应用并预览',
    imgDownload: '下载图片',
    imgOriginalSize: '原图尺寸',
    imgOriginalPreview: '原图预览',
    imgCropSection: '裁切',
    imgCropHint: '从边缘裁掉的像素，保留中间区域',
    imgMatteSection: '抠图',
    imgMatteHint: 'ChromaKey 色度键，适合纯色/近似纯色背景',
    imgEnableMatte: '启用抠图',
    imgRunMatte: '抠图',
    imgMattePreview: '抠图预览',
    imgPickColorHint: '点击原图取色',
    imgPixelated: '像素缩放（硬边缘）',
    pixelateHint: '上传图片，设置像素块大小，生成像素风效果',
    pixelateSize: '像素块大小',
    pixelateSizeHint: '数值越大，像素块越粗',
    pixelateApply: '像素化',
    pixelateSuccess: '像素化完成',
    pixelateFailed: '像素化失败',
    imgPreview: '预览',
    imgResizeSuccess: '已应用缩放',
    backToHome: '返回首页',
    // ParamsStep - video
    timeSliderHint: '拖动滑块选择起止时间，松手后视频自动定位到该位置',
    replay: '重播',
    autoReplay: '自动重播',
    totalLength: '总长',
    duration: '时长',
    seconds: '秒',
    approxFrames: '约 {n} 帧',
    // extract
    extractFrames: '提取帧',
    extractHint: '按当前时间范围和帧率提取视频帧',
    originalRes: '原始分辨率',
    expectedFrames: '预计提取 {n} 帧',
    extract: '提取帧',
    crop: '裁剪范围',
    cropHint: '裁剪范围 · 从边缘裁掉的像素数，提取时仅保留中间区域',
    cropManual: '手动拖拽调整裁剪',
    cropClose: '关闭预览',
    left: '左',
    right: '右',
    top: '上',
    bottom: '下',
    // export params (sidebar)
    exportParams: '导出参数',
    targetFps: '目标帧率 (FPS)',
    startTime: '开始时间(秒)',
    endTime: '结束时间(秒)',
    maxFrames: '最大帧数',
    // frame selection
    selectFrames: '选择要处理的帧',
    selectAll: '全选',
    selectNone: '全不选',
    duplicate: '重复×{n}',
    frame: '帧',
    // frame animation
    firstFrame: '第一帧',
    prevFrame: '上一帧',
    nextFrame: '下一帧',
    lastFrame: '最后帧',
    loop: '循环播放',
    removeFirst: '删除第一帧',
    addFirst: '添加首帧',
    removeLast: '去掉末尾帧',
    addNext: '添加下一帧',
    rangeSample: '范围抽帧',
    rangeSampleHint: '在已选帧范围内，按间隔采样保留帧 · 当前共 {n} 帧',
    rangeStart: '起始',
    rangeEnd: '结束',
    rangeStepUnit: '帧取1',
    rangeEvery: '每',
    rangeApply: '应用',
    frameAnimPreview: '帧动画预览',
    frameAnimPreviewHint: '根据选中帧的顺序预览动画 (共 {n} 帧，当前第 {idx} 帧) · 取消勾选可排除该帧',
    previewSpeed: '预览速度',
    frameNofM: '第 {current} / {total} 帧',
    pause: '暂停',
    play: '播放',
    // matte
    matte: '抠图',
    matteHint: '去除背景生成透明 PNG · 选择背景颜色后对选中帧进行 ChromaKey 抠图',
    bgColor: '背景颜色',
    tolerance: '容差 (0-100)',
    feather: '羽化 (0-30)',
    featherEdge: '边缘羽化 (0-30)',
    pickColor: '从预览图取色',
    solidBg: '纯色背景',
    gridBg: '透明网格',
    matteBrush: '画笔擦除',
    matteBrushHint: '在预览上涂抹需要擦除的区域',
    undo: '撤回',
    clearBrush: '清除画笔',
    runMatte: '执行抠图',
    // export
    frameSize: '设置帧图片尺寸',
    customSize: '自定义尺寸',
    sizePresets: '常用尺寸预设',
    aspectHint: '按单帧长宽比生成',
    layout: '图片排布',
    columns: '列数',
    padding: '边距',
    spacing: '间距',
    singleFrameSize: '单帧尺寸',
    aspectRatio: '长宽比',
    aspectAuto: '修改任一数值时，另一个会自动按比例调整',
    rowsCount: '预计行数',
    innerStroke: '内描边（导出后再应用）',
    strokeWidth: '描边宽度',
    strokeColor: '描边颜色',
    strokeHint: '设置参数后点击「应用并生成」更新预览，0 为不描边。下载将使用当前预览结果',
    applyStroke: '应用并生成',
    exportSprite: '导出 Sprite Sheet',
    preview: '预览',
    filename: '文件名（不含扩展名）',
    downloadZip: '下载 ZIP (PNG + index.json)',
    downloadPng: '下载 PNG',
    // messages
    videoNotLoaded: '视频尚未加载',
    videoNotReady: '视频尚未加载完成，请稍候再试',
    selectValidRange: '请先选择有效的时间范围',
    exportFailed: '导出失败',
    strokeApplyFailed: '应用描边失败',
    canvasCreateFailed: '无法创建画布',
    extractFailed: '提取帧失败',
    selectFrameForMatte: '请先选择要抠图的帧',
    selectBgColor: '请选择背景颜色',
    matteFailed: '抠图失败',
    extractFrameFirst: '请先提取帧',
    pickedBgColor: '已选取背景色 #{color}',
    originalImage: '原图',
    originalImageFirst: '原图（首帧）',
    cropResultSize: '裁剪后尺寸',
    resetCrop: '重置裁剪',
    mattePreview: '抠图预览',
    mattePickColorHint: '点击原图取色或选择颜色后点击「更新预览」',
    updatePreview: '更新预览',
    startMatteWithFrames: '开始抠图 ({n} 帧)',
    mattedFramesTitle: '抠图处理后的帧 ({n})',
    downloadMattedFrames: '打包下载处理后的帧 ({n})',
    downloadExtractedFrames: '打包下载 ({n})',
    chromaKeyMatte: 'ChromaKey 色度键抠图（适合纯色/近似纯色背景）',
    matteFrameN: '抠图 #{n}',
    width: '宽',
    height: '高',
    colsPlaceholder: '列数',
    paddingPlaceholder: '边距',
    spacingPlaceholder: '间距',
    errImageLoad: '图片加载失败',
    errCanvasCreate: '无法创建画布',
    errExport: '导出失败',
    errFrameLoad: '帧加载失败',
    errMaskLoad: '遮罩加载失败',
    errBaseLoad: '底图加载失败',
    errToBlob: '画布导出失败',
    errVideoSeek: '视频定位失败',
    extracting: '正在应用描边...',
    strokeWaitHint: '大图可能需要数十秒，请耐心等待，勿关闭页面',
    applyStrokeSuccess: '已应用描边',
    revertSuccess: '已还原为原图',
    packing: '正在打包...',
    exportSuccess: '已生成 Sprite Sheet，可预览后下载',
    extractSuccess: '已提取 {n} 帧',
    extractSuccessDup: '已提取 {n} 帧，发现 {dup} 处重复 ({groups} 组)',
    matteSuccess: '抠图完成，共 {n} 帧',
    downloadStarted: '已开始下载',
    downloadZipStarted: '已开始下载 ZIP',
    downloadPngStarted: '已开始下载 PNG',
    // Footer
    foundIssue: '发现问题？',
    // GifFrame
    gifToFrames: 'GIF 拆帧',
    framesToGif: '序列帧转 GIF',
    gifToFramesHint: '上传 GIF，提取为 PNG 帧并打包下载',
    framesToGifHint: '上传多张图片，合成循环 GIF',
    gifUploadHint: '点击或拖拽 GIF 文件',
    framesUploadHint: '点击或拖拽多张图片（PNG/JPG/WebP）',
    gifFrameDelay: '帧间隔 (ms)',
    gifExtracting: '正在拆帧...',
    gifEncoding: '正在生成 GIF...',
    gifExtractSuccess: '已提取 {n} 帧',
    gifEncodeSuccess: 'GIF 已生成',
    gifExtractFailed: '拆帧失败',
    gifEncodeFailed: '生成 GIF 失败',
    gifDownloadFrames: '下载帧 (ZIP)',
    gifDownloadGif: '下载 GIF',
    // SpriteSheet
    spriteSplit: '拆分',
    spriteToGif: '导出 GIF',
    spriteSplitHint: '上传 Sprite Sheet，按列数拆分为单帧 PNG',
    spriteToGifHint: '上传 Sprite Sheet，按列数拆帧，每一行导出为一个 GIF',
    spriteColumns: '列数',
    spriteColumnsHint: '每行的帧数',
    spriteRows: '行数',
    spriteRowsHint: '总行数',
    spriteSplitSuccess: '已拆分 {n} 帧',
    spriteSplitFailed: '拆分失败',
    spriteToGifSuccess: 'GIF 已生成',
    spriteToGifFailed: '生成失败',
    spriteUploadHint: '点击或拖拽 Sprite Sheet 图片 (PNG)',
    spriteRowN: '第 {n} 行',
    spriteDownloadAllGif: '下载全部 GIF (ZIP)',
    // Resource Nav
    navTitle: '资源导航',
    navTools: '像素动画工具',
    navAssets: '素材与资源',
    navReference: '学习参考',
  },
  en: {
    pageTitle: 'FrameRonin - Video to Sprite Sheet',
    pageDescription: 'Extract frames from video, remove background, generate Sprite Sheet. Supports transparent PNG and ZIP download.',
    subtitle: 'Video to Frames · Matte · Sprite Sheet',
    moduleVideo: 'Video to Frames',
    moduleVideoDesc: 'Extract frames, matte, Sprite Sheet',
    moduleImage: 'Pixel Image Processing',
    moduleImageDesc: 'Resize and add inner stroke to a single image',
    moduleGem: 'nanobanana Pixel Character Generator v1',
    moduleGemDesc: 'Generate preset-style pixel characters with Gemini',
    moduleGif: 'GIF ↔ Frames',
    moduleGifDesc: 'Split GIF to frames / Combine images to GIF',
    moduleSpriteSheet: 'Sprite Sheet',
    moduleSpriteSheetDesc: 'Split sprite sheet / Export to GIF',
    modulePixelate: 'Image Pixelate',
    modulePixelateDesc: 'Convert image to pixel block style',
    stepUpload: 'Upload',
    stepParams: 'Parameters',
    contactLabel: 'Found an issue?',
    poweredBy: 'Powered by',
    uploadHint: 'Click or drag video here',
    uploadFormats: 'MP4 / MOV / WebM / AVI / MKV, max 200MB',
    formatError: 'Only {formats} supported',
    sizeError: 'File must be under 200MB',
    selected: 'Selected',
    nextStep: 'Next: Parameters',
    imageUploadHint: 'Click or drag image here',
    imageFormats: 'PNG / JPG / WebP, max 20MB',
    imageFormatError: 'Only PNG / JPG / WebP',
    imageSizeError: 'Image must be under 20MB',
    imgTargetW: 'Target width',
    imgTargetH: 'Target height',
    imgKeepAspect: 'Keep aspect',
    imgStretch: 'Stretch to fill',
    imgStrokeSection: 'Stroke (optional)',
    imgStrokeHint: 'Draw stroke inward from transparent edge, 0 = no stroke',
    imgApplyPreview: 'Apply & preview',
    imgDownload: 'Download',
    imgOriginalSize: 'Original size',
    imgOriginalPreview: 'Original preview',
    imgCropSection: 'Crop',
    imgCropHint: 'Pixels to crop from edges',
    imgMatteSection: 'Matte',
    imgMatteHint: 'ChromaKey for solid/near-solid background',
    imgEnableMatte: 'Enable matte',
    imgRunMatte: 'Run matte',
    imgMattePreview: 'Matte preview',
    imgPickColorHint: 'Click image to pick color',
    imgPixelated: 'Pixel scaling (hard edge)',
    pixelateHint: 'Upload image, set pixel block size, generate pixel art effect',
    pixelateSize: 'Pixel block size',
    pixelateSizeHint: 'Larger value = coarser blocks',
    pixelateApply: 'Pixelate',
    pixelateSuccess: 'Pixelation complete',
    pixelateFailed: 'Pixelation failed',
    imgPreview: 'Preview',
    imgResizeSuccess: 'Resize applied',
    backToHome: 'Back to home',
    timeSliderHint: 'Drag slider to select range. Video seeks when you release.',
    replay: 'Replay',
    autoReplay: 'Auto Replay',
    totalLength: 'Total',
    duration: 'Duration',
    seconds: 's',
    approxFrames: '~{n} frames',
    extractFrames: 'Extract Frames',
    extractHint: 'Extract frames by time range and FPS',
    originalRes: 'Resolution',
    expectedFrames: '~{n} frames expected',
    extract: 'Extract',
    crop: 'Crop',
    cropHint: 'Pixels to crop from edges. Extracted frames use center area only.',
    cropManual: 'Adjust crop',
    cropClose: 'Close preview',
    left: 'Left',
    right: 'Right',
    top: 'Top',
    bottom: 'Bottom',
    exportParams: 'Export',
    targetFps: 'FPS',
    startTime: 'Start (s)',
    endTime: 'End (s)',
    maxFrames: 'Max frames',
    selectFrames: 'Select frames',
    selectAll: 'All',
    selectNone: 'None',
    duplicate: 'Dup×{n}',
    frame: 'Frame',
    firstFrame: 'First',
    prevFrame: 'Prev',
    nextFrame: 'Next',
    lastFrame: 'Last',
    loop: 'Loop',
    removeFirst: 'Remove first',
    addFirst: 'Add first',
    removeLast: 'Remove last',
    addNext: 'Add next',
    rangeSample: 'Range sample',
    rangeSampleHint: 'Sample within selected range · {n} frames',
    rangeStart: 'Start',
    rangeEnd: 'End',
    rangeStepUnit: 'take 1',
    rangeEvery: 'Every',
    rangeApply: 'Apply',
    frameAnimPreview: 'Frame Animation Preview',
    frameAnimPreviewHint: 'Preview by selected order ({n} frames, current #{idx}) · Uncheck to exclude',
    previewSpeed: 'Preview speed',
    frameNofM: 'Frame {current} / {total}',
    pause: 'Pause',
    play: 'Play',
    matte: 'Matte',
    matteHint: 'Remove background for transparent PNG. Pick color, ChromaKey on selected frames.',
    bgColor: 'Background',
    tolerance: 'Tolerance (0-100)',
    feather: 'Feather (0-30)',
    featherEdge: 'Edge feather (0-30)',
    pickColor: 'Pick from preview',
    solidBg: 'Solid',
    gridBg: 'Grid',
    matteBrush: 'Brush',
    matteBrushHint: 'Paint to erase areas',
    undo: 'Undo',
    clearBrush: 'Clear',
    runMatte: 'Matte',
    frameSize: 'Frame size',
    customSize: 'Custom',
    sizePresets: 'Presets',
    aspectHint: 'Keep aspect ratio',
    layout: 'Layout',
    columns: 'Cols',
    padding: 'Padding',
    spacing: 'Spacing',
    singleFrameSize: 'Frame',
    aspectRatio: 'Ratio',
    aspectAuto: 'Auto-adjust aspect',
    rowsCount: 'Rows',
    innerStroke: 'Inner stroke',
    strokeWidth: 'Width',
    strokeColor: 'Color',
    strokeHint: 'Set params, click Apply. 0 = no stroke.',
    applyStroke: 'Apply',
    exportSprite: 'Export Sprite Sheet',
    preview: 'Preview',
    filename: 'Filename',
    downloadZip: 'Download ZIP',
    downloadPng: 'Download PNG',
    extracting: 'Applying stroke...',
    strokeWaitHint: 'Large images may take dozens of seconds. Please wait and do not close the page.',
    applyStrokeSuccess: 'Stroke applied',
    revertSuccess: 'Reverted',
    packing: 'Packing...',
    exportSuccess: 'Sprite sheet ready',
    extractSuccess: 'Extracted {n} frames',
    extractSuccessDup: 'Extracted {n} frames, {dup} duplicates ({groups} groups)',
    matteSuccess: 'Matted {n} frames',
    downloadStarted: 'Download started',
    downloadZipStarted: 'ZIP download started',
    downloadPngStarted: 'PNG download started',
    videoNotLoaded: 'Video not loaded yet',
    videoNotReady: 'Video loading, please wait',
    selectValidRange: 'Select a valid time range first',
    exportFailed: 'Export failed',
    strokeApplyFailed: 'Stroke apply failed',
    canvasCreateFailed: 'Cannot create canvas',
    extractFailed: 'Extract failed',
    selectFrameForMatte: 'Select frames for matte first',
    selectBgColor: 'Select background color',
    matteFailed: 'Matte failed',
    extractFrameFirst: 'Extract frames first',
    pickedBgColor: 'Picked background #{color}',
    originalImage: 'Original',
    originalImageFirst: 'Original (first frame)',
    cropResultSize: 'Crop result',
    resetCrop: 'Reset crop',
    mattePreview: 'Matte preview',
    mattePickColorHint: 'Click original to pick color or select color, then click Update preview',
    updatePreview: 'Update preview',
    startMatteWithFrames: 'Start matte ({n} frames)',
    mattedFramesTitle: 'Matted frames ({n})',
    downloadMattedFrames: 'Download matted ({n})',
    downloadExtractedFrames: 'Download ZIP ({n})',
    chromaKeyMatte: 'ChromaKey matte (solid/near-solid background)',
    matteFrameN: 'Matte #{n}',
    width: 'W',
    height: 'H',
    colsPlaceholder: 'Columns',
    paddingPlaceholder: 'Padding',
    spacingPlaceholder: 'Spacing',
    errImageLoad: 'Image load failed',
    errCanvasCreate: 'Cannot create canvas',
    errExport: 'Export failed',
    errFrameLoad: 'Frame load failed',
    errMaskLoad: 'Mask load failed',
    errBaseLoad: 'Base image load failed',
    errToBlob: 'Canvas export failed',
    errVideoSeek: 'Video seek failed',
    foundIssue: 'Found an issue?',
    // GifFrame
    gifToFrames: 'GIF to Frames',
    framesToGif: 'Frames to GIF',
    gifToFramesHint: 'Upload GIF, extract PNG frames and download as ZIP',
    framesToGifHint: 'Upload multiple images to create looping GIF',
    gifUploadHint: 'Click or drag GIF file',
    framesUploadHint: 'Click or drag multiple images (PNG/JPG/WebP)',
    gifFrameDelay: 'Frame delay (ms)',
    gifExtracting: 'Extracting frames...',
    gifEncoding: 'Encoding GIF...',
    gifExtractSuccess: 'Extracted {n} frames',
    gifEncodeSuccess: 'GIF created',
    gifExtractFailed: 'Extract failed',
    gifEncodeFailed: 'Encode failed',
    gifDownloadFrames: 'Download Frames (ZIP)',
    gifDownloadGif: 'Download GIF',
    // SpriteSheet
    spriteSplit: 'Split',
    spriteToGif: 'Export GIF',
    spriteSplitHint: 'Upload sprite sheet, split into frame PNGs by columns',
    spriteToGifHint: 'Upload sprite sheet, each row exports as one GIF',
    spriteColumns: 'Columns',
    spriteColumnsHint: 'Frames per row',
    spriteRows: 'Rows',
    spriteRowsHint: 'Total row count',
    spriteSplitSuccess: 'Split {n} frames',
    spriteSplitFailed: 'Split failed',
    spriteToGifSuccess: 'GIF created',
    spriteToGifFailed: 'Export failed',
    spriteUploadHint: 'Click or drag sprite sheet (PNG)',
    spriteRowN: 'Row {n}',
    spriteDownloadAllGif: 'Download all GIFs (ZIP)',
    // Resource Nav
    navTitle: 'Resources',
    navTools: 'Pixel Art Tools',
    navAssets: 'Assets & Resources',
    navReference: 'Learning',
  },
  ja: {
    pageTitle: 'FrameRonin - 動画→スプライト',
    pageDescription: '動画からフレーム抽出・背景除去・スプライトシート生成。透明PNG・ZIP対応。',
    subtitle: '動画→フレーム · マット · スプライト',
    moduleVideo: '動画→フレーム',
    moduleVideoDesc: 'フレーム抽出・マット・スプライト',
    moduleImage: 'ピクセル画像処理',
    moduleImageDesc: '単一画像の縮小・内側ストローク',
    moduleGem: 'nanobanana プリセットピクセルキャラ生成器 v1',
    moduleGemDesc: 'Gemini でプリセット風ピクセルキャラを生成',
    moduleGif: 'GIF ↔ フレーム',
    moduleGifDesc: 'GIF をフレームに分割 / 画像から GIF 生成',
    moduleSpriteSheet: 'スプライトシート',
    moduleSpriteSheetDesc: 'スプライト分割 / GIF 出力',
    modulePixelate: '画像ピクセル化',
    modulePixelateDesc: '画像をピクセルブロック風に変換',
    stepUpload: 'アップロード',
    stepParams: 'パラメータ',
    contactLabel: '問題がありますか？',
    poweredBy: 'Powered by',
    uploadHint: 'クリックまたはドラッグで動画を選択',
    uploadFormats: 'MP4 / MOV / WebM / AVI / MKV、最大200MB',
    formatError: '{formats} のみ対応',
    sizeError: '200MB以下にしてください',
    selected: '選択中',
    nextStep: '次：パラメータ',
    imageUploadHint: 'クリックまたはドラッグで画像を選択',
    imageFormats: 'PNG / JPG / WebP、最大20MB',
    imageFormatError: 'PNG / JPG / WebPのみ',
    imageSizeError: '20MB以下にしてください',
    imgTargetW: '幅',
    imgTargetH: '高さ',
    imgKeepAspect: '比率維持',
    imgStretch: '伸縮',
    imgStrokeSection: 'ストローク（任意）',
    imgStrokeHint: '透明エッジ内側に描画、0=なし',
    imgApplyPreview: '適用＆プレビュー',
    imgDownload: 'ダウンロード',
    imgOriginalSize: '原寸',
    imgOriginalPreview: '原図プレビュー',
    imgCropSection: 'クロップ',
    imgCropHint: '端から切り取るピクセル',
    imgMatteSection: 'マット',
    imgMatteHint: '単色・近似単色背景向け ChromaKey',
    imgEnableMatte: 'マット有効',
    imgRunMatte: 'マット実行',
    imgMattePreview: 'マットプレビュー',
    imgPickColorHint: '画像クリックで取色',
    imgPixelated: 'ピクセルスケール（硬いエッジ）',
    pixelateHint: '画像をアップロードし、ピクセルブロックサイズを設定してピクセル風に変換',
    pixelateSize: 'ピクセルブロックサイズ',
    pixelateSizeHint: '大きいほど粗いブロックに',
    pixelateApply: 'ピクセル化',
    pixelateSuccess: 'ピクセル化完了',
    pixelateFailed: 'ピクセル化失敗',
    imgPreview: 'プレビュー',
    imgResizeSuccess: 'リサイズ適用済',
    backToHome: 'ホームに戻る',
    timeSliderHint: 'スライダーで範囲選択。離すとその位置へシーク',
    replay: '再生',
    autoReplay: 'ループ再生',
    totalLength: '合計',
    duration: '長さ',
    seconds: '秒',
    approxFrames: '約{n}フレーム',
    extractFrames: 'フレーム抽出',
    extractHint: '時間範囲とFPSでフレームを抽出',
    originalRes: '解像度',
    expectedFrames: '約{n}フレーム想定',
    extract: '抽出',
    crop: 'クロップ',
    cropHint: '端から切り取るピクセル。中央域のみ使用',
    cropManual: '手動調整',
    cropClose: '閉じる',
    left: '左',
    right: '右',
    top: '上',
    bottom: '下',
    exportParams: 'エクスポート',
    targetFps: 'FPS',
    startTime: '開始(秒)',
    endTime: '終了(秒)',
    maxFrames: '最大フレーム数',
    selectFrames: 'フレーム選択',
    selectAll: '全選択',
    selectNone: '解除',
    duplicate: '重複×{n}',
    frame: 'フレーム',
    firstFrame: '最初',
    prevFrame: '前',
    nextFrame: '次',
    lastFrame: '最後',
    loop: 'ループ',
    removeFirst: '先頭削除',
    addFirst: '先頭追加',
    removeLast: '末尾削除',
    addNext: '末尾追加',
    rangeSample: '範囲サンプル',
    rangeSampleHint: '選択範囲内で間隔サンプル · {n}フレーム',
    rangeStart: '開始',
    rangeEnd: '終了',
    rangeStepUnit: 'に1',
    rangeEvery: '毎',
    rangeApply: '適用',
    frameAnimPreview: 'フレームアニメプレビュー',
    frameAnimPreviewHint: '選択順でプレビュー ({n}フレーム、現在#{idx}) · チェック解除で除外',
    previewSpeed: '再生速度',
    frameNofM: 'フレーム {current} / {total}',
    pause: '一時停止',
    play: '再生',
    matte: 'マット',
    matteHint: '背景除去で透明PNG。色選択後ChromaKey',
    bgColor: '背景色',
    tolerance: '許容(0-100)',
    feather: 'フェザー(0-30)',
    featherEdge: 'エッジフェザー(0-30)',
    pickColor: 'プレビューから取得',
    solidBg: '単色',
    gridBg: 'グリッド',
    matteBrush: 'ブラシ',
    matteBrushHint: '塗って消去',
    undo: '元に戻す',
    clearBrush: 'クリア',
    runMatte: 'マット',
    frameSize: 'フレームサイズ',
    customSize: 'カスタム',
    sizePresets: 'プリセット',
    aspectHint: 'アスペクト比維持',
    layout: '配置',
    columns: '列',
    padding: '余白',
    spacing: '間隔',
    singleFrameSize: 'フレーム',
    aspectRatio: '比率',
    aspectAuto: 'アスペクト自動',
    rowsCount: '行数',
    innerStroke: '内側ストローク',
    strokeWidth: '幅',
    strokeColor: '色',
    strokeHint: '設定後「適用」クリック。0=なし',
    applyStroke: '適用',
    exportSprite: 'スプライト出力',
    preview: 'プレビュー',
    filename: 'ファイル名',
    downloadZip: 'ZIP ダウンロード',
    downloadPng: 'PNG ダウンロード',
    extracting: 'ストローク適用中...',
    strokeWaitHint: '大きな画像は数十秒かかることがあります。お待ちください。',
    applyStrokeSuccess: 'ストローク適用済',
    revertSuccess: '元に戻しました',
    packing: 'パッケージ中...',
    exportSuccess: 'スプライト準備完了',
    extractSuccess: '{n}フレーム抽出',
    extractSuccessDup: '{n}フレーム抽出、{dup}箇所重複({groups}組)',
    matteSuccess: '{n}フレームマット完了',
    downloadStarted: 'ダウンロード開始',
    downloadZipStarted: 'ZIP ダウンロード開始',
    downloadPngStarted: 'PNG ダウンロード開始',
    videoNotLoaded: '動画がまだ読み込まれていません',
    videoNotReady: '動画読み込み中、しばらくお待ちください',
    selectValidRange: '有効な時間範囲を選択してください',
    exportFailed: 'エクスポート失敗',
    strokeApplyFailed: 'ストローク適用失敗',
    canvasCreateFailed: 'キャンバス作成不可',
    extractFailed: '抽出失敗',
    selectFrameForMatte: 'マット対象のフレームを選択してください',
    selectBgColor: '背景色を選択してください',
    matteFailed: 'マット失敗',
    extractFrameFirst: '先にフレームを抽出してください',
    pickedBgColor: '背景色 #{color} を選択',
    originalImage: '原図',
    originalImageFirst: '原図（先頭フレーム）',
    cropResultSize: 'クロップ後サイズ',
    resetCrop: 'クロップリセット',
    mattePreview: 'マットプレビュー',
    mattePickColorHint: '原図をクリックで取色、または色選択後「プレビュー更新」をクリック',
    updatePreview: 'プレビュー更新',
    startMatteWithFrames: 'マット開始 ({n}フレーム)',
    mattedFramesTitle: 'マット済みフレーム ({n})',
    downloadMattedFrames: 'マット済みダウンロード ({n})',
    downloadExtractedFrames: 'ZIP ダウンロード ({n})',
    chromaKeyMatte: 'ChromaKey マット（単色/近似単色背景向け）',
    matteFrameN: 'マット #{n}',
    width: '幅',
    height: '高さ',
    colsPlaceholder: '列数',
    paddingPlaceholder: '余白',
    spacingPlaceholder: '間隔',
    errImageLoad: '画像読み込み失敗',
    errCanvasCreate: 'キャンバス作成不可',
    errExport: 'エクスポート失敗',
    errFrameLoad: 'フレーム読み込み失敗',
    errMaskLoad: 'マスク読み込み失敗',
    errBaseLoad: 'ベース画像読み込み失敗',
    errToBlob: 'キャンバス出力失敗',
    errVideoSeek: '動画シーク失敗',
    foundIssue: '問題がありますか？',
    // GifFrame
    gifToFrames: 'GIF をフレームに',
    framesToGif: 'フレームを GIF に',
    gifToFramesHint: 'GIF をアップロードし、PNG フレームとして ZIP ダウンロード',
    framesToGifHint: '複数画像をアップロードしてループ GIF を生成',
    gifUploadHint: 'GIF ファイルをクリックまたはドラッグ',
    framesUploadHint: '複数画像をクリックまたはドラッグ (PNG/JPG/WebP)',
    gifFrameDelay: 'フレーム間隔 (ms)',
    gifExtracting: 'フレーム抽出中...',
    gifEncoding: 'GIF 生成中...',
    gifExtractSuccess: '{n} フレーム抽出完了',
    gifEncodeSuccess: 'GIF 生成完了',
    gifExtractFailed: '抽出失敗',
    gifEncodeFailed: '生成失敗',
    gifDownloadFrames: 'フレーム ZIP ダウンロード',
    gifDownloadGif: 'GIF ダウンロード',
    // SpriteSheet
    spriteSplit: '分割',
    spriteToGif: 'GIF 出力',
    spriteSplitHint: 'スプライトシートをアップロードし、列数でフレーム PNG に分割',
    spriteToGifHint: 'スプライトシートをアップロードし、各行を 1 つの GIF として出力',
    spriteColumns: '列数',
    spriteColumnsHint: '1行あたりのフレーム数',
    spriteRows: '行数',
    spriteRowsHint: '総行数',
    spriteSplitSuccess: '{n} フレーム分割完了',
    spriteSplitFailed: '分割失敗',
    spriteToGifSuccess: 'GIF 生成完了',
    spriteToGifFailed: '出力失敗',
    spriteUploadHint: 'スプライトシート (PNG) をクリックまたはドラッグ',
    spriteRowN: '第 {n} 行',
    spriteDownloadAllGif: '全 GIF ダウンロード (ZIP)',
    // Resource Nav
    navTitle: 'リソース',
    navTools: 'ピクセルアニメツール',
    navAssets: '素材・アセット',
    navReference: '学習・参考',
  },
}

export function t(lang: Lang, key: string, params?: Record<string, string | number>): string {
  let s = locales[lang][key] ?? locales.zh[key] ?? key
  if (params) {
    for (const [k, v] of Object.entries(params)) {
      s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(v))
    }
  }
  return s
}

const ERROR_CODE_MAP: Record<string, string> = {
  ERR_IMAGE_LOAD: 'errImageLoad',
  ERR_CANVAS_CREATE: 'errCanvasCreate',
  ERR_EXPORT: 'errExport',
  ERR_FRAME_LOAD: 'errFrameLoad',
  ERR_MASK_LOAD: 'errMaskLoad',
  ERR_BASE_LOAD: 'errBaseLoad',
  ERR_TOBLOB: 'errToBlob',
  ERR_VIDEO_SEEK: 'errVideoSeek',
}

export function formatError(e: unknown, tFn: (key: string) => string): string {
  if (e instanceof Error && ERROR_CODE_MAP[e.message]) {
    return tFn(ERROR_CODE_MAP[e.message]!)
  }
  return String(e)
}
